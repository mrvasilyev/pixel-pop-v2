:root {
  /* Defaults */
  --tg-theme-bg-color: #ffffff;
  --tg-theme-text-color: #000000;
  --tg-theme-button-color: #3390ec;
  --tg-theme-button-text-color: #ffffff;

  /* Robust Safe Area Calculation */
  --system-safe-area-top: max(var(--tg-safe-area-inset-top, 0px), env(safe-area-inset-top, 0px));
  --header-offset: var(--tg-header-height-compensation, 0px);
  
  /* Final Safe Area Top: Max of Content Inset OR (System + Header Compensation) */
  --safe-area-inset-top: max(var(--tg-content-safe-area-inset-top, 0px), calc(var(--system-safe-area-top) + var(--header-offset)));
  
  --safe-area-inset-bottom: max(var(--tg-content-safe-area-inset-bottom, 0px), var(--tg-safe-area-inset-bottom, 0px), env(safe-area-inset-bottom, 0px));
  --safe-area-inset-left: max(var(--tg-content-safe-area-inset-left, 0px), var(--tg-safe-area-inset-left, 0px), env(safe-area-inset-left, 0px));
  --safe-area-inset-right: max(var(--tg-content-safe-area-inset-right, 0px), var(--tg-safe-area-inset-right, 0px), env(safe-area-inset-right, 0px));
}

body {
  margin: 0;
  padding: 0;
  background-color: var(--tg-theme-bg-color);
  color: var(--tg-theme-text-color);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  overflow: hidden; /* App handles scroll */
  height: var(--tg-viewport-stable-height, 100vh);
  width: 100vw;
}

#root {
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
}

/* Utilities */
.w-full { width: 100%; }
.h-full { height: 100%; }
.relative { position: relative; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
